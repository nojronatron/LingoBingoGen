@page "/"
@using Library
@inject HttpClient Http

@if (!ShowBingoBoard)
{
<EditForm Model="@Player" OnValidSubmit="@HandleValidSubmit">
    <h1>Welcome to LingoBingo!</h1>
    <label for="userName">Your name or pseudonym</label>
    <InputText id="userName" @bind-Value="@Player.Name" />
    <button type="submit">Submit</button>
    <DataAnnotationsValidator />
    <ValidationSummary />
</EditForm>
}
else
{
    <BingoBoard Player="Player" Words="LoadedWords" />
}

@code
{
    private bool ShowBingoBoard = false;
    private string SelectedCategory { get; set; }
    private string[] JsonWords { get; set; }
    public List<string> LoadedWords { get; set; } = new List<string>();
    public BingoPlayer Player = new BingoPlayer();

    protected override async Task OnInitializedAsync()
    {
        JsonWords = await Http.GetFromJsonAsync<string[]>("sample-data/default_word_list.json");
        await Task.Run(() =>
        {
            LoadedWords = new List<string>(JsonWords.ToList());
        });
    }

    public void HandleValidSubmit()
    {
        ShowBingoBoard = true;
    }
}